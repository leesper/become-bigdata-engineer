# Hive数据仓库

## 知识点

### 1. 数据仓库通识

数据仓库用于面向分析的应用场景，为企业决策提供支持。它出于分析性报告和决策支持的目的构建，作为仓库，它本身不产生数据，也不消费数据，只存储数据。

数据仓库主要特征：

* 面向主题
* 集成的
* 非易失的
* 时变的

数据仓库和数据库分别对应OLAP和OLTP场景：

1. 数据库是面向事务的设计，数据仓库是面向主题的设计
2. 数据库一般存储业务数据，数据仓库存储历史数据
3. 数据库的表结构设计要引入三范式，尽量避免冗余，一般针对某一业务应用进行设计
4. 数据仓库在设计时是反范式的，要引入冗余，有特定的设计技巧
5. 数据库是为了捕获数据而设计，数据仓库是为了分析数据而设计

数据仓库以分层架构的思想进行设计，分为源数据层（ODS）、数据仓库层（DW）和数据应用层（DA）。源数据层对数据无任何更改，直接沿用外围系统数据结构和数据，作为临时存储层且不对外开放，为后一步数据处理做准备；数据仓库层也称为细节层，该层数据是一致的、准确的、干净的，即对源系统数据进行了清洗；数据应用层作为前端应用直接读取的数据源使用，根据相关报表和专题分析的需求计算生成。

### 2. Hive

Hive是基于Hadoop的数据仓库工具。可以将结构化的数据文件（例如CSV）转换成数据库表，提供类SQL查询功能。其基本原理是将SQL语句转换成MapReduce程序进行计算。Hive适用于海量离线数据统计分析应用场景。

重点：

1. Hive核心概念、与数据库的区别
2. 架构原理
3. 交互方式
4. 数据类型
5. Hive的DDL语法操作，内部表和外部表区别

## 思考题

1. 完成课件中外部分区表score4的操作，并说明为什么最后需要执行msck repair table score4

答：score4表的操作主要考察两个知识点，一个是分区表的概念，一个是外部表的概念。创建表之后是空的，需要把表和数据之间建立关联，故需要使用`msck repair table score4`将数据和表关联起来，这样才能从表中查询数据进行分析。